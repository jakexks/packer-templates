{
  "description": "CoreOS, consul, registrator, zookeeper, mesos-master, marathon",
  "builders": [
    {
      "name": "digitalocean-master",
      "type": "digitalocean",
      "droplet_name": "livewyermaster",
      "image": "coreos-stable",
      "private_networking": true,
      "region": "lon1",
      "size": "1gb",
      "snapshot_name": "livewyermaster-{{timestamp}}"
    }
  ],
  "provisioners": [
    {
      "type": "file",
      "source": "consul-discovery.service",
      "destination": "/etc/systemd/system/consul-discovery.service"
    },
    {
      "type": "file",
      "source": "consul.service",
      "destination": "/etc/systemd/system/consul.service"
    },
    {
      "type": "file",
      "source": "registrator.service",
      "destination": "/etc/systemd/system/registrator.service"
    },
    {
      "type": "file",
      "source": "zookeeper.service",
      "destination": "/etc/systemd/system/zookeeper.service"
    },
    {
      "type": "file",
      "source": "mesos-master.service",
      "destination": "/etc/systemd/system/mesos-master.service"
    },
    {
      "type": "file",
      "source": "marathon.service",
      "destination": "/etc/systemd/system/marathon.service"
    },
    {
      "type": "shell",
      "inline": ["sudo chown root:root /etc/systemd/system/*.service", "sudo systemctl enable consul.service consul-discovery.service registrator.service", "sudo systemctl start consul.service consul-discovery.service registrator.service"]
    }
  ]
}
